{"remainingRequest":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\register.vue?vue&type=style&index=0&id=8f8a1d9a&lang=less&scoped=true&","dependencies":[{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\register.vue","mtime":1601131189143},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovLyDot5/oioLngrnmoLflvI8KLnJlZ2lzdGVyX2NvbnRhaW5lciB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2IzZDRmYzsKICBoZWlnaHQ6IDEwMCU7Cn0KCi8vIOeZu+W9leahhgoucmVnaXN0ZXJfYm94IHsKICB3aWR0aDogNDUwcHg7CiAgaGVpZ2h0OiAzNTBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJvcmRlci1yYWRpdXM6IDNweDsgLy8g5ZyG6KeSCiAgcG9zaXRpb246IGFic29sdXRlOyAvLyDnu53lr7nlrprkvY0KICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IC8vIOagueaNruiHquW3seS9jee9riDku6Xoh6rlt7HkuLrplb/luqbkvY3np7sKICAvLyDlpLTlg4/moYYKICAuYXZhdGFyX2JveCB7CiAgICB3aWR0aDogMTMwcHg7CiAgICBoZWlnaHQ6IDEzMHB4OwogICAgYm9yZGVyOiAxcHggc29saWQgI2VlZTsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsgLy8g5Yqg5ZyG6KeSCiAgCiAgICBib3gtc2hhZG93OiAwIDAgMTBweCAjZGRkOyAvLyDnm5LlrZDpmLTlvbEKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDUwJTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogICAgaW1nIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgYm9yZGVyLXJhZGl1czogNTAlOyAvLyDliqDlnIbop5IKICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsKICAgIH0KICB9CiAgLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkIHsKICAgIGJvcmRlcjogMXB4IGRhc2hlZCAjZDlkOWQ5OwogICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICB9CiAgLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkOmhvdmVyIHsKICAgIGJvcmRlci1jb2xvcjogIzQwOWVmZjsKICB9CiAgLmF2YXRhci11cGxvYWRlci1pY29uIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC0xMyUsIC0xMyUpOwogICAgZm9udC1zaXplOiAyOHB4OwogICAgY29sb3I6ICM4YzkzOWQ7CiAgICB3aWR0aDogMTc4cHg7CiAgICBoZWlnaHQ6IDE3OHB4OwogICAgbGluZS1oZWlnaHQ6IDE3OHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogIH0KCiAgLmF2YXRhciB7CiAgICBkaXNwbGF5OiBibG9jazsKICB9CiAgLmJ0bnMgewogICAgZGlzcGxheTogZmxleDsgLy8g5by55oCn5biD5bGACiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyAvLyDlsL7pg6jlr7npvZAKICB9CiAgLnJlZ2lzdGVyX2Zvcm0gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAwJTsKICAgIHdpZHRoOiAxMDAlOwogICAgcGFkZGluZzogMCAxMHB4OwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsgLy8g6K6+572u6L655qGGCiAgfQp9Cg=="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"register_container\">\n    <div class=\"register_box\">\n      <div class=\"avatar_box\">\n        <img v-if=\"registerForm.userimg\" :src=\"require('../static/img/'+registerForm.userimg)\"   />\n      </div>\n\n      <!--添加表单-->\n      <el-form\n        ref=\"registerFormRef\"\n        :model=\"registerForm\"\n        :rules=\"registerRules\"\n        class=\"register_form\"\n        label-width=\"0px\"\n        \n      >\n        <el-button type=\"text\" @click=\"dialogVisible = true\">上传头像</el-button>\n        <el-form-item prop=\"username\">\n          <el-input v-model=\"registerForm.username\" prefix-icon=\"iconfont icondenglu\" placeholder=\"用户名\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input v-model=\"registerForm.password\" prefix-icon=\"iconfont iconmima\" placeholder=\"密码\" type=\"password\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"intro\">\n          <el-input v-model=\"registerForm.intro\" placeholder=\"个人简介\"></el-input>\n        </el-form-item>\n\n        <el-form-item class=\"btns\">\n          <el-button type=\"primary\" @click=\"register\">注册</el-button>\n          <el-button type=\"info\" @click=\"returnback\">返回登陆界面</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <el-dialog\n      title=\"头像一旦上传无法修改，切记！\"\n      :visible.sync=\"dialogVisible\"\n      width=\"30%\"\n      :before-close=\"handleClose\"\n      style=\"margin-top:-100px;height=300px\"\n    >\n      <span>\n        <el-upload\n          class=\"avatar-uploader\"\n          action=\"http://localhost:8890/user/upload\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n          :before-upload=\"beforeAvatarUpload\"\n        >\n          <img v-if=\"registerForm.userimg\" :src=\"require('../static/img/'+registerForm.userimg)\" width=\"200\" height=\"200\" class=\"avatar\" />\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  watch: {\n    registerForm : {\n      handler: (val, olVal) => {},\n      deep: true,\n    },\n  },\n  data() {\n    return {\n      registerForm: {\n        username: \"\",\n        password: \"\",\n        intro:'',\n        userimg: \"\",\n      },\n      dialogVisible: false,\n      registerRules: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          {\n            min: 5,\n            max: 20,\n            message: \"长度在 5 到 20 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          { min: 6, max: 8, message: \"密码为 6~8 位\", trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  methods: {\n    handleAvatarSuccess(res, file) {\n      this.$message_success(res);\n      this.registerForm.userimg = res;\n      console.log(\"dd\"+this.registerForm.userimg);\n    },\n    handleClose(done) {\n      this.$confirm(\"确认关闭？\")\n        .then((_) => {\n          done();\n        })\n        .catch((_) => {});\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\";\n     // const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n      }\n    //  if (!isLt2M) {\n      //  this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n     // }\n      //开始上传\n     // if (isJPG && isLT2M == true) {\n  //      let fd = new FormData();\n    //    fd.append(\"file\", file);\n      //  console.log(fd);\n    //  }\n\n      return isJPG;\n    },\n\n    register() {\n      this.$refs.registerFormRef.validate(async (valid) => {\n        if (!valid) return;\n        // 调用get请求\n        const { data: res } = await this.$http.post(\n          \"user/register\",\n          this.registerForm\n        );\n        if (res == \"success!\") {\n          // window.sessionStorage.setItem('flag','ok'); // session 放置\n          this.$message.success(res);\n          this.$router.push({ path: \"/login\" });\n        } else {\n          this.$message.error(res);\n          this.$router.push({ path: \"/register\" });\n        }\n      });\n    },\n    returnback() {\n      this.$router.push({ path: \"/login\" });\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n// 跟节点样式\n.register_container {\n  background-color: #b3d4fc;\n  height: 100%;\n}\n\n// 登录框\n.register_box {\n  width: 450px;\n  height: 350px;\n  background-color: #fff;\n  border-radius: 3px; // 圆角\n  position: absolute; // 绝对定位\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%); // 根据自己位置 以自己为长度位移\n  // 头像框\n  .avatar_box {\n    width: 130px;\n    height: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%; // 加圆角\n  \n    box-shadow: 0 0 10px #ddd; // 盒子阴影\n    position: absolute;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    img {\n      width: 100%;\n      height: 100%;\n      border-radius: 50%; // 加圆角\n      background-color: #eee;\n    }\n  }\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409eff;\n  }\n  .avatar-uploader-icon {\n    transform: translate(-13%, -13%);\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n\n  .avatar {\n    display: block;\n  }\n  .btns {\n    display: flex; // 弹性布局\n    justify-content: flex-end; // 尾部对齐\n  }\n  .register_form {\n    position: absolute;\n    bottom: 0%;\n    width: 100%;\n    padding: 0 10px;\n    box-sizing: border-box; // 设置边框\n  }\n}\n</style>"]}]}