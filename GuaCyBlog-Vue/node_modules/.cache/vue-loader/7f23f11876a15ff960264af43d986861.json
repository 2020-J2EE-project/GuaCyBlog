{"remainingRequest":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\admin\\following.vue?vue&type=style&index=0&id=ce89551e&scoped=true&lang=css&","dependencies":[{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\admin\\following.vue","mtime":1601195095957},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmVsLWNhcmQgew0KICBsaW5lLWhlaWdodDogMzBweDsNCn0NCi5lbC1tYWluIHsNCiAgcGFkZGluZzogMHB4Ow0KICBsaW5lLWhlaWdodDogMzBweDsNCn0NCi5lbC10YWJsZSB7DQogIG1hcmdpbi10b3A6IDBweDsNCiAgbGluZS1oZWlnaHQ6IDMwcHg7DQp9DQouaW1nIHsNCiAgd2lkdGg6IDEzMHB4Ow0KICBoZWlnaHQ6IDEzMHB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjZWVlOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQoNCiAgYm94LXNoYWRvdzogMCAwIDEwcHggI2RkZDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBsZWZ0OiA1MCU7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOw0KfQ0KLmZyaWVuZCB7DQogIG1hcmdpbi10b3A6IDBweDsNCiAgbGluZS1oZWlnaHQ6IDMwcHg7DQogIHdpZHRoOiA1MDBweDsNCn0NCg=="},{"version":3,"sources":["following.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"following.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n  <div class=\"friend\">\r\n\r\n    <el-main>\r\n      <!-- 好友列表 -->\r\n              <el-input placeholder=\"搜索关注\" v-model=\"value\">\r\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"Search\"></el-button>\r\n              </el-input>\r\n              <el-table\r\n                :data=\"sfollowings.slice((currentPage-1)*pagesize,currentPage*pagesize)\"\r\n                border\r\n                stripe\r\n              >\r\n                <el-table-column width=\"30\" type=\"index\"></el-table-column>\r\n                <el-table-column width=\"80\" label=\"用户名\" prop=\"username\"></el-table-column>\r\n                <el-table-column width=\"200\" label=\"个人简介\" prop=\"intro\"></el-table-column>\r\n                <div v-if=\"userid==user.id\">\r\n                <el-table-column width=\"80\" label=\"操作\" prop=\"id\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      prop=\"id\"\r\n                      @click=\"removefollowing(scope.row)\"\r\n                    >\r\n                      <p>取消关注</p>\r\n                    </el-button>\r\n                  </template>\r\n                </el-table-column>\r\n                </div>\r\n                <el-table-column width=\"100\" label=\"操作\" prop=\"id\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button type=\"text\" size=\"small\" prop=\"id\" @click=\"visitor(scope.row)\">\r\n                      <p>访问主页</p>\r\n                    </el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentPage\"\r\n                :page-sizes=\"[5, 10, 20, 40]\"\r\n                :page-size=\"pagesize1\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"sfollowings.length\"\r\n              ></el-pagination>\r\n            <!-- </el-tab-pane>\r\n          </el-tabs> -->\r\n            \r\n    </el-main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      //粉丝、关注、搜索用户\r\n      currentPage: 1,\r\n      pagesize: 5,\r\n     \r\n      followings: [],\r\n      sfollowings: [],\r\n     \r\n      value: \"\",\r\n      v: \"\",\r\n      user: {\r\n        id: window.sessionStorage.getItem(\"visitingId\"),\r\n      },\r\n      userid:window.sessionStorage.getItem(\"userId\"),\r\n\r\n      //添加follow关系\r\n      follow: {\r\n        followingId: \"\",\r\n        followerId: \"\",\r\n      },\r\n    };\r\n  },\r\n  watch: {\r\n    sfollowings: {\r\n      handler : (val,olVal) =>{\r\n           \r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created() {\r\n    this.getFList2();\r\n  },\r\n  methods: {\r\n   \r\n    async getFList2() {\r\n      const { data: res } = await this.$http.post(\"user/following\", this.user);\r\n      this.followings = res.followings;\r\n      this.sfollowings = res.followings;\r\n      this.$message_success(sfollowings);\r\n    },\r\n    Search(){\r\n      // search 是 v-model=\"search\" 的 search\r\n      var value = this.value;\r\n     \r\n          this.sfollowings = this.followings.filter(function (product) {\r\n            return Object.keys(product).some(function (key) {\r\n              return String(product[key]).toLowerCase().indexOf(value) > -1;\r\n            });\r\n          });\r\n    },\r\n    visitor(x) {\r\n     //     this.$message_success(\"Hello!!!\");\r\n      console.log(\"try try:\", x.id);\r\n      window.sessionStorage.setItem(\"visitingId\", x.id);\r\n      this.$router.go(0);\r\n    //  this.$router.push({path:\"/welcome\",query : {id:x.id}});\r\n    },\r\n    async addfollow(x) {\r\n      this.follow.followerId = window.sessionStorage.getItem(\"userId\");\r\n      this.follow.followingId = x;\r\n      this.$message_success(x);\r\n      const { data: res } = await this.$http.post(\r\n        \"user/addfollow\",\r\n        this.follow\r\n      );\r\n      this.getFList2();\r\n    },\r\n    \r\n    async removefollower(x) {\r\n      this.follow.followingId = window.sessionStorage.getItem(\"userId\");\r\n      this.follow.followerId = x.id;\r\n      const { data: res } = await this.$http.post(\r\n        \"user/removefollow\",\r\n        this.follow\r\n      );\r\n      this.getFList1();\r\n    },\r\n    async removefollowing(x) {\r\n      this.follow.followerId = window.sessionStorage.getItem(\"userId\");\r\n      this.follow.followingId = x.id;\r\n      const { data: res } = await this.$http.post(\r\n        \"user/removefollow\",\r\n        this.follow\r\n      );\r\n      this.getFList2();\r\n    },\r\n    handleSizeChange: function (size) {\r\n      this.pagesize = size;\r\n    },\r\n    handleCurrentChange: function (currentPage) {\r\n      this.currentPage = currentPage;\r\n    },\r\n\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.el-card {\r\n  line-height: 30px;\r\n}\r\n.el-main {\r\n  padding: 0px;\r\n  line-height: 30px;\r\n}\r\n.el-table {\r\n  margin-top: 0px;\r\n  line-height: 30px;\r\n}\r\n.img {\r\n  width: 130px;\r\n  height: 130px;\r\n  border: 1px solid #eee;\r\n  border-radius: 50%;\r\n\r\n  box-shadow: 0 0 10px #ddd;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.friend {\r\n  margin-top: 0px;\r\n  line-height: 30px;\r\n  width: 500px;\r\n}\r\n</style>"]}]}