{"remainingRequest":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\admin\\follower.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\admin\\follower.vue","mtime":1601201020448},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8v57KJ5Lid44CB5YWz5rOo44CB5pCc57Si55So5oi3DQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIHBhZ2VzaXplOiA1LA0KICAgICAgY3VycmVudFBhZ2UxOiAxLA0KICAgICAgcGFnZXNpemUxOiA1LA0KICAgICAgZm9sbG93ZXJzOiBbXSwNCiAgICAgIHNmb2xsb3dlcnM6IFtdLA0KICAgICAgdmFsdWU6ICIiLA0KICAgICAgdjogIiIsDQogICAgICB1c2VyOiB7DQogICAgICAgIGlkOiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidmlzaXRpbmdJZCIpLA0KICAgICAgfSwNCiAgICAgIHVzZXJpZDogd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpLA0KDQogICAgICAvL+a3u+WKoGZvbGxvd+WFs+ezuw0KICAgICAgZm9sbG93OiB7DQogICAgICAgIGZvbGxvd2luZ0lkOiAiIiwNCiAgICAgICAgZm9sbG93ZXJJZDogIiIsDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIHdhdGNoOiB7DQogICAgc2ZvbGxvd2Vyczogew0KICAgICAgaGFuZGxlcjogKHZhbCwgb2xWYWwpID0+IHt9LA0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0Rkxpc3QxKCk7DQogICAgdGhpcy5nZXRVc2VyTGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgZ2V0Rkxpc3QxKCkgew0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgidXNlci9mb2xsb3dlciIsIHRoaXMudXNlcik7DQogICAgICB0aGlzLmZvbGxvd2VycyA9IHJlcy5mb2xsb3dlcnM7DQogICAgICB0aGlzLnNmb2xsb3dlcnMgPSByZXMuZm9sbG93ZXJzOw0KICAgIH0sDQogICAgYXN5bmMgZ2V0VXNlckxpc3QoKSB7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCJ1c2VyL3VzZXJzIik7DQogICAgICB0aGlzLnVzZXJsaXN0ID0gcmVzLnVzZXJsaXN0Ow0KICAgICAgLy90aGlzLiRtZXNzYWdlX2Vycm9yKHRoaXMudXNlcmxpc3QpOw0KICAgIH0sDQogICAgU2VhcmNoKCkgew0KICAgICAgLy8gc2VhcmNoIOaYryB2LW1vZGVsPSJzZWFyY2giIOeahCBzZWFyY2gNCiAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7DQogICAgICB0aGlzLnNmb2xsb3dlcnMgPSB0aGlzLmZvbGxvd2Vycy5maWx0ZXIoZnVuY3Rpb24gKHByb2R1Y3QpIHsNCiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHByb2R1Y3QpLnNvbWUoZnVuY3Rpb24gKGtleSkgew0KICAgICAgICAgIHJldHVybiBTdHJpbmcocHJvZHVjdFtrZXldKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUpID4gLTE7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICB2aXNpdG9yKHgpIHsNCiAgICAgIHRoaXMuJG1lc3NhZ2Vfc3VjY2VzcygiSGVsbG8hISEiKTsNCiAgICAgIGNvbnNvbGUubG9nKCJ0cnkgdHJ5OiIsIHguaWQpOw0KICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInZpc2l0aW5nSWQiLCB4LmlkKTsNCiAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsNCiAgICB9LA0KICAgIGFzeW5jIGFkZGZvbGxvdyh4KSB7DQogICAgICB0aGlzLmZvbGxvdy5mb2xsb3dlcklkID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpOw0KICAgICAgdGhpcy5mb2xsb3cuZm9sbG93aW5nSWQgPSB4Ow0KICAgICAgdGhpcy4kbWVzc2FnZV9zdWNjZXNzKHgpOw0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgNCiAgICAgICAgInVzZXIvYWRkZm9sbG93IiwNCiAgICAgICAgdGhpcy5mb2xsb3cNCiAgICAgICk7DQogICAgICB0aGlzLiRtZXNzYWdlX3N1Y2Nlc3MocmVzKTsNCiAgICAgIHRoaXMuZ2V0Rkxpc3QxKCk7DQogICAgfSwNCg0KICAgIGFzeW5jIHJlbW92ZWZvbGxvd2VyKHgpIHsNCiAgICAgIHRoaXMuZm9sbG93LmZvbGxvd2luZ0lkID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpOw0KICAgICAgdGhpcy5mb2xsb3cuZm9sbG93ZXJJZCA9IHguaWQ7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KA0KICAgICAgICAidXNlci9yZW1vdmVmb2xsb3ciLA0KICAgICAgICB0aGlzLmZvbGxvdw0KICAgICAgKTsNCiAgICAgIHRoaXMuZ2V0Rkxpc3QxKCk7DQogICAgfSwNCg0KICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIChzaXplKSB7DQogICAgICB0aGlzLnBhZ2VzaXplID0gc2l6ZTsNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIChjdXJyZW50UGFnZSkgew0KICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["follower.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"follower.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n  <div class=\"friend\">\r\n    <el-main>\r\n      <el-input placeholder=\"搜索粉丝\" v-model=\"value\">\r\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"Search\"></el-button>\r\n      </el-input>\r\n      <el-table\r\n        :data=\"sfollowers.slice((currentPage-1)*pagesize,currentPage*pagesize)\"\r\n        border\r\n        stripe\r\n      >\r\n        <el-table-column width=\"30\" type=\"index\"></el-table-column>\r\n        <el-table-column width=\"80\" label=\"用户名\" prop=\"username\"></el-table-column>\r\n        <el-table-column width=\"200\" label=\"个人简介\" prop=\"intro\"></el-table-column>\r\n        <div v-if=\"userid==user.id\">\r\n          <el-table-column width=\"80\" label=\"操作\" prop=\"id\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" size=\"small\" prop=\"id\" @click=\"removefollower(scope.row)\">\r\n                <p>移除粉丝</p>\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </div>\r\n        <el-table-column width label=\"to\" prop=\"id\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" size=\"small\" align=\"left\" prop=\"id\" @click=\"visitor(scope.row)\">\r\n              <p>访问主页</p>\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"currentPage\"\r\n        :page-sizes=\"[5, 10, 20, 40]\"\r\n        :page-size=\"pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"sfollowers.length\"\r\n      ></el-pagination>\r\n    </el-main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      //粉丝、关注、搜索用户\r\n      currentPage: 1,\r\n      pagesize: 5,\r\n      currentPage1: 1,\r\n      pagesize1: 5,\r\n      followers: [],\r\n      sfollowers: [],\r\n      value: \"\",\r\n      v: \"\",\r\n      user: {\r\n        id: window.sessionStorage.getItem(\"visitingId\"),\r\n      },\r\n      userid: window.sessionStorage.getItem(\"userId\"),\r\n\r\n      //添加follow关系\r\n      follow: {\r\n        followingId: \"\",\r\n        followerId: \"\",\r\n      },\r\n    };\r\n  },\r\n  watch: {\r\n    sfollowers: {\r\n      handler: (val, olVal) => {},\r\n      deep: true,\r\n    },\r\n  },\r\n  created() {\r\n    this.getFList1();\r\n    this.getUserList();\r\n  },\r\n  methods: {\r\n    async getFList1() {\r\n      const { data: res } = await this.$http.post(\"user/follower\", this.user);\r\n      this.followers = res.followers;\r\n      this.sfollowers = res.followers;\r\n    },\r\n    async getUserList() {\r\n      const { data: res } = await this.$http.post(\"user/users\");\r\n      this.userlist = res.userlist;\r\n      //this.$message_error(this.userlist);\r\n    },\r\n    Search() {\r\n      // search 是 v-model=\"search\" 的 search\r\n      var value = this.value;\r\n      this.sfollowers = this.followers.filter(function (product) {\r\n        return Object.keys(product).some(function (key) {\r\n          return String(product[key]).toLowerCase().indexOf(value) > -1;\r\n        });\r\n      });\r\n    },\r\n    visitor(x) {\r\n      this.$message_success(\"Hello!!!\");\r\n      console.log(\"try try:\", x.id);\r\n      window.sessionStorage.setItem(\"visitingId\", x.id);\r\n      this.$router.go(0);\r\n    },\r\n    async addfollow(x) {\r\n      this.follow.followerId = window.sessionStorage.getItem(\"userId\");\r\n      this.follow.followingId = x;\r\n      this.$message_success(x);\r\n      const { data: res } = await this.$http.post(\r\n        \"user/addfollow\",\r\n        this.follow\r\n      );\r\n      this.$message_success(res);\r\n      this.getFList1();\r\n    },\r\n\r\n    async removefollower(x) {\r\n      this.follow.followingId = window.sessionStorage.getItem(\"userId\");\r\n      this.follow.followerId = x.id;\r\n      const { data: res } = await this.$http.post(\r\n        \"user/removefollow\",\r\n        this.follow\r\n      );\r\n      this.getFList1();\r\n    },\r\n\r\n    handleSizeChange: function (size) {\r\n      this.pagesize = size;\r\n    },\r\n    handleCurrentChange: function (currentPage) {\r\n      this.currentPage = currentPage;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.el-card {\r\n  line-height: 30px;\r\n}\r\n.el-main {\r\n  padding: 0px;\r\n  line-height: 30px;\r\n}\r\n.el-table {\r\n  margin-top: 0px;\r\n  line-height: 30px;\r\n}\r\n.img {\r\n  width: 130px;\r\n  height: 130px;\r\n  border: 1px solid #eee;\r\n  border-radius: 50%;\r\n\r\n  box-shadow: 0 0 10px #ddd;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.friend {\r\n  margin-top: 0px;\r\n  line-height: 30px;\r\n  width: 500px;\r\n}\r\n</style>"]}]}