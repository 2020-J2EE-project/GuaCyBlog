{"remainingRequest":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\admin\\following.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\admin\\following.vue","mtime":1601195095957},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8v57KJ5Lid44CB5YWz5rOo44CB5pCc57Si55So5oi3DQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIHBhZ2VzaXplOiA1LA0KICAgICANCiAgICAgIGZvbGxvd2luZ3M6IFtdLA0KICAgICAgc2ZvbGxvd2luZ3M6IFtdLA0KICAgICANCiAgICAgIHZhbHVlOiAiIiwNCiAgICAgIHY6ICIiLA0KICAgICAgdXNlcjogew0KICAgICAgICBpZDogd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInZpc2l0aW5nSWQiKSwNCiAgICAgIH0sDQogICAgICB1c2VyaWQ6d2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpLA0KDQogICAgICAvL+a3u+WKoGZvbGxvd+WFs+ezuw0KICAgICAgZm9sbG93OiB7DQogICAgICAgIGZvbGxvd2luZ0lkOiAiIiwNCiAgICAgICAgZm9sbG93ZXJJZDogIiIsDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIHdhdGNoOiB7DQogICAgc2ZvbGxvd2luZ3M6IHsNCiAgICAgIGhhbmRsZXIgOiAodmFsLG9sVmFsKSA9PnsNCiAgICAgICAgICAgDQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldEZMaXN0MigpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICANCiAgICBhc3luYyBnZXRGTGlzdDIoKSB7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCJ1c2VyL2ZvbGxvd2luZyIsIHRoaXMudXNlcik7DQogICAgICB0aGlzLmZvbGxvd2luZ3MgPSByZXMuZm9sbG93aW5nczsNCiAgICAgIHRoaXMuc2ZvbGxvd2luZ3MgPSByZXMuZm9sbG93aW5nczsNCiAgICAgIHRoaXMuJG1lc3NhZ2Vfc3VjY2VzcyhzZm9sbG93aW5ncyk7DQogICAgfSwNCiAgICBTZWFyY2goKXsNCiAgICAgIC8vIHNlYXJjaCDmmK8gdi1tb2RlbD0ic2VhcmNoIiDnmoQgc2VhcmNoDQogICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlOw0KICAgICANCiAgICAgICAgICB0aGlzLnNmb2xsb3dpbmdzID0gdGhpcy5mb2xsb3dpbmdzLmZpbHRlcihmdW5jdGlvbiAocHJvZHVjdCkgew0KICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHByb2R1Y3QpLnNvbWUoZnVuY3Rpb24gKGtleSkgew0KICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHByb2R1Y3Rba2V5XSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbHVlKSA+IC0xOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSk7DQogICAgfSwNCiAgICB2aXNpdG9yKHgpIHsNCiAgICAgLy8gICAgIHRoaXMuJG1lc3NhZ2Vfc3VjY2VzcygiSGVsbG8hISEiKTsNCiAgICAgIGNvbnNvbGUubG9nKCJ0cnkgdHJ5OiIsIHguaWQpOw0KICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInZpc2l0aW5nSWQiLCB4LmlkKTsNCiAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsNCiAgICAvLyAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6Ii93ZWxjb21lIixxdWVyeSA6IHtpZDp4LmlkfX0pOw0KICAgIH0sDQogICAgYXN5bmMgYWRkZm9sbG93KHgpIHsNCiAgICAgIHRoaXMuZm9sbG93LmZvbGxvd2VySWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIik7DQogICAgICB0aGlzLmZvbGxvdy5mb2xsb3dpbmdJZCA9IHg7DQogICAgICB0aGlzLiRtZXNzYWdlX3N1Y2Nlc3MoeCk7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KA0KICAgICAgICAidXNlci9hZGRmb2xsb3ciLA0KICAgICAgICB0aGlzLmZvbGxvdw0KICAgICAgKTsNCiAgICAgIHRoaXMuZ2V0Rkxpc3QyKCk7DQogICAgfSwNCiAgICANCiAgICBhc3luYyByZW1vdmVmb2xsb3dlcih4KSB7DQogICAgICB0aGlzLmZvbGxvdy5mb2xsb3dpbmdJZCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKTsNCiAgICAgIHRoaXMuZm9sbG93LmZvbGxvd2VySWQgPSB4LmlkOw0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgNCiAgICAgICAgInVzZXIvcmVtb3ZlZm9sbG93IiwNCiAgICAgICAgdGhpcy5mb2xsb3cNCiAgICAgICk7DQogICAgICB0aGlzLmdldEZMaXN0MSgpOw0KICAgIH0sDQogICAgYXN5bmMgcmVtb3ZlZm9sbG93aW5nKHgpIHsNCiAgICAgIHRoaXMuZm9sbG93LmZvbGxvd2VySWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIik7DQogICAgICB0aGlzLmZvbGxvdy5mb2xsb3dpbmdJZCA9IHguaWQ7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KA0KICAgICAgICAidXNlci9yZW1vdmVmb2xsb3ciLA0KICAgICAgICB0aGlzLmZvbGxvdw0KICAgICAgKTsNCiAgICAgIHRoaXMuZ2V0Rkxpc3QyKCk7DQogICAgfSwNCiAgICBoYW5kbGVTaXplQ2hhbmdlOiBmdW5jdGlvbiAoc2l6ZSkgew0KICAgICAgdGhpcy5wYWdlc2l6ZSA9IHNpemU7DQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiAoY3VycmVudFBhZ2UpIHsNCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBjdXJyZW50UGFnZTsNCiAgICB9LA0KDQogIH0sDQp9Ow0K"},{"version":3,"sources":["following.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"following.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n  <div class=\"friend\">\r\n\r\n    <el-main>\r\n      <!-- 好友列表 -->\r\n              <el-input placeholder=\"搜索关注\" v-model=\"value\">\r\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"Search\"></el-button>\r\n              </el-input>\r\n              <el-table\r\n                :data=\"sfollowings.slice((currentPage-1)*pagesize,currentPage*pagesize)\"\r\n                border\r\n                stripe\r\n              >\r\n                <el-table-column width=\"30\" type=\"index\"></el-table-column>\r\n                <el-table-column width=\"80\" label=\"用户名\" prop=\"username\"></el-table-column>\r\n                <el-table-column width=\"200\" label=\"个人简介\" prop=\"intro\"></el-table-column>\r\n                <div v-if=\"userid==user.id\">\r\n                <el-table-column width=\"80\" label=\"操作\" prop=\"id\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      prop=\"id\"\r\n                      @click=\"removefollowing(scope.row)\"\r\n                    >\r\n                      <p>取消关注</p>\r\n                    </el-button>\r\n                  </template>\r\n                </el-table-column>\r\n                </div>\r\n                <el-table-column width=\"100\" label=\"操作\" prop=\"id\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button type=\"text\" size=\"small\" prop=\"id\" @click=\"visitor(scope.row)\">\r\n                      <p>访问主页</p>\r\n                    </el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentPage\"\r\n                :page-sizes=\"[5, 10, 20, 40]\"\r\n                :page-size=\"pagesize1\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"sfollowings.length\"\r\n              ></el-pagination>\r\n            <!-- </el-tab-pane>\r\n          </el-tabs> -->\r\n            \r\n    </el-main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      //粉丝、关注、搜索用户\r\n      currentPage: 1,\r\n      pagesize: 5,\r\n     \r\n      followings: [],\r\n      sfollowings: [],\r\n     \r\n      value: \"\",\r\n      v: \"\",\r\n      user: {\r\n        id: window.sessionStorage.getItem(\"visitingId\"),\r\n      },\r\n      userid:window.sessionStorage.getItem(\"userId\"),\r\n\r\n      //添加follow关系\r\n      follow: {\r\n        followingId: \"\",\r\n        followerId: \"\",\r\n      },\r\n    };\r\n  },\r\n  watch: {\r\n    sfollowings: {\r\n      handler : (val,olVal) =>{\r\n           \r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created() {\r\n    this.getFList2();\r\n  },\r\n  methods: {\r\n   \r\n    async getFList2() {\r\n      const { data: res } = await this.$http.post(\"user/following\", this.user);\r\n      this.followings = res.followings;\r\n      this.sfollowings = res.followings;\r\n      this.$message_success(sfollowings);\r\n    },\r\n    Search(){\r\n      // search 是 v-model=\"search\" 的 search\r\n      var value = this.value;\r\n     \r\n          this.sfollowings = this.followings.filter(function (product) {\r\n            return Object.keys(product).some(function (key) {\r\n              return String(product[key]).toLowerCase().indexOf(value) > -1;\r\n            });\r\n          });\r\n    },\r\n    visitor(x) {\r\n     //     this.$message_success(\"Hello!!!\");\r\n      console.log(\"try try:\", x.id);\r\n      window.sessionStorage.setItem(\"visitingId\", x.id);\r\n      this.$router.go(0);\r\n    //  this.$router.push({path:\"/welcome\",query : {id:x.id}});\r\n    },\r\n    async addfollow(x) {\r\n      this.follow.followerId = window.sessionStorage.getItem(\"userId\");\r\n      this.follow.followingId = x;\r\n      this.$message_success(x);\r\n      const { data: res } = await this.$http.post(\r\n        \"user/addfollow\",\r\n        this.follow\r\n      );\r\n      this.getFList2();\r\n    },\r\n    \r\n    async removefollower(x) {\r\n      this.follow.followingId = window.sessionStorage.getItem(\"userId\");\r\n      this.follow.followerId = x.id;\r\n      const { data: res } = await this.$http.post(\r\n        \"user/removefollow\",\r\n        this.follow\r\n      );\r\n      this.getFList1();\r\n    },\r\n    async removefollowing(x) {\r\n      this.follow.followerId = window.sessionStorage.getItem(\"userId\");\r\n      this.follow.followingId = x.id;\r\n      const { data: res } = await this.$http.post(\r\n        \"user/removefollow\",\r\n        this.follow\r\n      );\r\n      this.getFList2();\r\n    },\r\n    handleSizeChange: function (size) {\r\n      this.pagesize = size;\r\n    },\r\n    handleCurrentChange: function (currentPage) {\r\n      this.currentPage = currentPage;\r\n    },\r\n\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.el-card {\r\n  line-height: 30px;\r\n}\r\n.el-main {\r\n  padding: 0px;\r\n  line-height: 30px;\r\n}\r\n.el-table {\r\n  margin-top: 0px;\r\n  line-height: 30px;\r\n}\r\n.img {\r\n  width: 130px;\r\n  height: 130px;\r\n  border: 1px solid #eee;\r\n  border-radius: 50%;\r\n\r\n  box-shadow: 0 0 10px #ddd;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.friend {\r\n  margin-top: 0px;\r\n  line-height: 30px;\r\n  width: 500px;\r\n}\r\n</style>"]}]}