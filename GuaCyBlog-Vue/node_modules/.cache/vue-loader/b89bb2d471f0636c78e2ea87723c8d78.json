{"remainingRequest":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\showArticle.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\src\\components\\showArticle.vue","mtime":1600773087987},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\GuaCyBlog (1)\\GuaCyBlog\\GuaCyBlog-Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5tYXJrZG93bi1ib2R5IHsNCiAgYm94LXNpemluZzpib3JkZXItYm94Ow0KICBtaW4td2lkdGg6IDIwMHB4Ow0KICBtYXgtd2lkdGg6IDEwMCU7DQogIGJveC1zaGFkb3c6MnB4IDRweCA2cHggZ3JheTsNCiAgcGFkZGluZzogNDBweCAxNXB4IDQ1cHggMjBweDsNCiAgbWFyZ2luOiAxIGF1dG8gMTAwcHg7DQp9DQoudGltZSB7DQogIGZvbnQtc2l6ZTogMTBweDsNCiAgY29sb3I6ICM5OTk7DQogIGFsaWduOnJpZ2h0Ow0KfQ0K"},{"version":3,"sources":["showArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"showArticle.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <el-container>\r\n    <el-aside>haha</el-aside>\r\n    <el-main>\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item :to=\"{ path: '/article' }\">文章列表</el-breadcrumb-item>\r\n        <el-breadcrumb-item :to=\"{ path: '/show' }\">{{article.articleTitle}}</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <div align=\"center\">\r\n        {{article.articleTitle}}\r\n      </div>\r\n      <mavon-editor class=\"md\"\r\n        :value=\"article.articleText\"\r\n        :subfield = \"prop.subfield\"\r\n        :defaultOpen = \"prop.defaultOpen\"\r\n        :toolbarsFlag = \"prop.toolbarsFlag\"\r\n        :editable=\"prop.editable\"\r\n        :scrollStyle=\"prop.scrollStyle\"\r\n      >\r\n      </mavon-editor>\r\n    <el-container direction=\"vertical\"  v-theme:bg=\"'wide'\">\r\n      <!--评论区-->\r\n        <div v-for=\"comment in commentList\" :key=\"comment\">\r\n          <el-card class=\"box-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                用户:{{comment.reviewerId}}\r\n            </div>\r\n            <p>{{comment.commentText}}</p>\r\n            <div class=\"bottom\">\r\n                <span>\r\n                <el-button type=\"text\" class=\"button\">回复</el-button>\r\n                <el-button type=\"text\" class=\"button\">删除</el-button>\r\n                </span>\r\n            </div>\r\n            <el-col class=\"time\">评论时间：{{comment.commentTime}}</el-col>\r\n          </el-card>\r\n        </div>\r\n      <!--发布评论-->\r\n      <el-form class=\"comment-container\" :model=\"commentForm\" ref=\"commentForm\"\r\n               :rules=\"commentRules\" label-position=\"left\">\r\n        <h4 class=\"comment-title\">发布评论</h4>\r\n        <el-form-item prop=\"commentText\">\r\n          <el-input type=\"textarea\" :rows=\"3\" v-model=\"commentForm.commentText\" auto-complete=\"off\" placeholder=\"评论内容\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button class=\"comment-button\" type=\"primary\" @click=\"submitComment\">发布</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-container>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport 'github-markdown-css/github-markdown.css'\r\nexport default{\r\n  name : 'showArticle',\r\n  //props:['articleText'],\r\n  // articleText : '# 你好',\r\n  created() {\r\n  //  getComment(this.$route.query.article);\r\n  },\r\n  data(){\r\n    return{\r\n      article:this.$route.query.article,\r\n      commentList :this.$route.query.commentList,\r\n      user: {\r\n        id:window.sessionStorage.getItem(\"userId\"),\r\n        username:window.sessionStorage.getItem(\"username\"),\r\n      },\r\n      //评论格式\r\n      commentForm: {\r\n        reviewerId:'' ,\r\n        articleId:'',\r\n        commentText:'',\r\n        commentTime:''\r\n      },\r\n      //信息格式\r\n      infoForm: {\r\n        postUserId:window.sessionStorage.getItem(\"userId\"),\r\n        receiveUserId:'',\r\n        type:'',\r\n        articleId:'',\r\n        isRead:0\r\n      },\r\n      //评论规则\r\n      commentRules: {\r\n        commentText: [\r\n          { required: true, message: \"评论内容不得为空\", trigger: \"blur\" },\r\n          { max: 100, message: \"长度在 100 个字符以内\", trigger: \"blur\" }\r\n        ],\r\n      }     \r\n    };\r\n  },\r\n  methods: {\r\n      async submitComment(){\r\n       //处理评论\r\n       this.commentForm.articleId=this.article.articleId;\r\n       this.commentForm.reviewerId=this.article.userId;\r\n       const {data :res1} = await this.$http.post(\"article/addComment\", this.commentForm);\r\n       //更新评论\r\n        const {data:res2}=await this.$http.post(\"article/allComment\",this.article);\r\n        this.commentList=res2.comments;\r\n        this.$message_success(this.commentList);\r\n       //处理通知\r\n       this.infoForm.receiveUserId=this.article.userId;\r\n       this.infoForm.type='2';\r\n       this.infoForm.articleId=this.article.articleId;\r\n       const {data:res3 }=await this.$http.post(\"info/addInfo\",this.infoForm);\r\n          this.$message_success(res3);\r\n    }\r\n  },\r\n  computed: {\r\n    prop () {\r\n      let data = {\r\n        subfield: false,// 单双栏模式\r\n        defaultOpen: 'preview',//edit： 默认展示编辑区域 ， preview： 默认展示预览区域\r\n        editable: false,\r\n        toolbarsFlag: false,\r\n        scrollStyle: true\r\n      }\r\n      return data\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.markdown-body {\r\n  box-sizing:border-box;\r\n  min-width: 200px;\r\n  max-width: 100%;\r\n  box-shadow:2px 4px 6px gray;\r\n  padding: 40px 15px 45px 20px;\r\n  margin: 1 auto 100px;\r\n}\r\n.time {\r\n  font-size: 10px;\r\n  color: #999;\r\n  align:right;\r\n}\r\n</style>\r\n"]}]}